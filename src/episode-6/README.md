# リファクタリングはじめの一歩

## 関数の抽出

- コードの断片を見て
- 何をしているのかを理解した上で
- 独立した関数として抽出し
- 目的にふさわしい名前をつける

### ※ 動機

いつコードを独立した関数として出すか？

あるガイドラインでは

- 関数は一画面に収まる
- 2回以上使われるコードはそれ自体を関数に

のように再利用に基づいています。

しかし最も納得できるのは **意図と実装の分離** であり

何をしているか調べないとわからないコードの場合、
何をしているかを示す名前で関数を抽出すべきです。

#### ◆ Smalltalk の例

Smalltalk はプログラム言語で、白黒のコンソールだけの画面（コンソール上で動く？

例えば文字を強調したい時に、グラフィック関連のクラスに **highlight** と言うメソッドがあり、それで反転処理されて強調を表していましたが、こちらの中身は **reverse** メソッド を呼び出しているだけでメソッド名のほうが長い状態でした。それでも **reverse** の意図とこの実装には大きな違いがあるので

小さい関数の場合、関数呼び出しコストが問題になることがありましたが
今は稀で、コンパイラでは小さい関数のほうがキャッシュしやすく、かえってうまくいく場合もあります。

ただし、このような小さな関数は名前が良くないと意味がありません

### ※ 手順


## 関数のインライン化

## 変数の抽出

## 変数のインライン化

## 関数宣言の変更

## 変数のカプセル化

## 変数名の変更

## パラメータオブジェクトの導入

## 関数群のクラスへの集約

## 関数群の変換への集約

## フェーズの分離
